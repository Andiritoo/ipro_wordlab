@using Domain
@implements IDialogContentComponent<Statistics>

<FluentDialogHeader>
    <FluentLabel Typo="Typography.PaneHeader">
        Statistics
    </FluentLabel>
</FluentDialogHeader>
<FluentDialogBody>
    <FluentStack Orientation="Orientation.Vertical" Gap="20">

        <FluentStack HorizontalGap="40">
            <Stat Label="Played" Value="@Content.GamesPlayed" />
            <Stat Label="Win %" Value="@($"{Content.WinRate:0}%")" />
            <Stat Label="Avg guesses" Value="@Content.AvgGuesses.ToString("0.0")" />
        </FluentStack>

        <FluentStack HorizontalGap="40">
            <Stat Label="Current streak" Value="@Content.CurrentStreak" />
            <Stat Label="Max streak" Value="@Content.MaxStreak" />
        </FluentStack>

        @if (Content.BestTime != null)
        {
            <FluentLabel Typo="Typography.Body">
                🏆 Best time:
                <b>@Content.BestTime.Value.ToString(@"mm\:ss")</b>
            </FluentLabel>
        }

        <FluentStack Orientation="Orientation.Vertical" Gap="6">
            <FluentLabel Typo="Typography.Body" Weight="FontWeight.Bold">
                Guess distribution
            </FluentLabel>

            @foreach (var entry in Content.GuessDistribution.OrderBy(x => x.Key))
            {
                <FluentStack HorizontalAlignment="HorizontalAlignment.SpaceBetween">
                    <FluentLabel>@($"{entry.Key} guesses")</FluentLabel>
                    <FluentLabel><b>@entry.Value</b></FluentLabel>
                </FluentStack>
            }
        </FluentStack>

    </FluentStack>
</FluentDialogBody>
<FluentDialogFooter>
    <FluentButton Appearance="Appearance.Neutral" OnClick="@CloseAsync">
        Close
    </FluentButton>
</FluentDialogFooter>